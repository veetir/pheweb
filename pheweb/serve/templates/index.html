{% extends "layout.html" %}
{% block navbar_left %}{% endblock %}
{% block contained %}

<br style="margin-top:2em">
<div class="row">
  <div class="col-xs-12">
    <h1 style="text-align: center; margin-bottom: 1em;">PheWeb</h1>
  </div>
</div>
<div class="row">
  <div class="col-xs-12">
    <div id="home-searchbox" style="margin: 0 auto; width: 30%;">
      <form action="{{ url_for('.go') }}">
         <fieldset>
            <div class="form-group" style="position: relative; width: 100%;">
              <img src="{{ url_for('.static', filename='images/search.svg') }}"
                   alt="Search"
                   style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); height: 24px; width: 24px; cursor: pointer; z-index: 10;">
              <input name="query" class="form-control typeahead"
                     autocomplete="off"
                     type="text"
                     placeholder="Search for a variant, gene, or phenotype"
                     style="width: 100%; font-size: 16px; padding-left: 40px;">
            </div>
         </fieldset>
      </form>
      {% include 'index/below-query.html' ignore missing %}
    </div>
  </div>
</div>

<div class="row mt-5">
  <div class="col-xs-12">
    <h2 class="text-center mb-3">Browse phenotypes</h2>
    <table id="home-phenotypes" class="table table-striped table-bordered">
      <thead>
        <tr>
          <th>Category</th>
          <th>Phenotype</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
    <div class="text-end">
      <a href="{{ url_for('.phenotypes_page') }}">View all phenotypes &rarr;</a>
    </div>
  </div>
</div>

<script type="text/javascript">
$(document).ready(function() {
  $('#home-phenotypes').DataTable({
    ajax: {
      url: window.model.urlprefix + "/api/phenotypes.json",
      dataSrc: ''
    },
    columns: [
      { data: 'category', title: 'Category' },
      {
        data: null,
        title: 'Phenotype',
        render: function(data, type, row, meta) {
          var label = data.phenostring || data.phenocode;
          return '<a style="color:black" href="' + window.model.urlprefix + '/pheno/' + data.phenocode + '\">' +
                 label +
                 '</a>';
        }
      }
    ],
    pageLength: 5,
    lengthChange: false,
    searching: false,
    info: false,
    ordering: true
  });
});
</script>
{% endblock %}
